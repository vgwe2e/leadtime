---
description: python coding best practices
globs: *
---
Hereâ€™s a compressed markdown version combining the best of both documents for an LLM-friendly format:

# **ðŸ Python Best Practices for Clean, Efficient, and Maintainable Code**

## **1ï¸âƒ£ PEP 8: Code Style Essentials**
âœ… **4 Spaces per Indent** *(No Tabs)*  
âœ… **Limit Line Length**: **79 chars (72 for comments)**  
âœ… **Naming Conventions**:  
   - `snake_case` â†’ functions/variables (`def process_data():`)  
   - `CamelCase` â†’ classes (`class DataProcessor:`)  
   - `UPPER_SNAKE_CASE` â†’ constants (`MAX_RETRIES = 5`)  

âœ… **Whitespace Rules**:  
   - `x = (a + b) * (c - d)` *(Spaces around operators)*  
   - `my_list = [1, 2, 3]` *(No spaces inside brackets)*  
   - `if x is None:` *(Use `is` for None checks)*  

âœ… **Code Structure**:  
   - **1 blank line** between functions, **2 blank lines** between classes  
   - Always use `if __name__ == "__main__":` for scripts  

---

## **2ï¸âƒ£ Token Efficiency: Write Less, Do More**
âœ… **Use Pythonic Patterns**  
- **List Comprehensions Over Loops** â†’ `squares = [x**2 for x in range(10)]`  
- **Generator Expressions** â†’ `sum(x**2 for x in range(10**6))` *(Memory-efficient)*  
- **`map()` and `filter()`** â†’ `evens = list(filter(lambda x: x % 2 == 0, range(10)))`  
- **Walrus Operator (`:=`)** â†’ `if (n := len(my_list)) > 10: print(f"List has {n} items")`  
- **Use `zip()` & `enumerate()`** â†’ `for name, age in zip(names, ages):`  
- **Set for Fast Membership Checks** â†’ `if value in my_set:` *(Faster than lists)*  
- **`defaultdict` & `Counter` for Counting** â†’ `freq = Counter(words)`  
- **Efficient String Concatenation** â†’ `text = " ".join(words)`  
- **Function Caching (`@lru_cache`)**  
  ```python
  from functools import lru_cache
  @lru_cache(None)
  def fib(n): return n if n < 2 else fib(n-1) + fib(n-2)

	â€¢	try-except Over Checking First

try:
    result = my_dict[key]
except KeyError:
    result = default

3ï¸âƒ£ CHange one thing when you have an issue - do not refactor all the code at once!

4ï¸âƒ£ Testing Best Practices (Use pytest)

âœ… Basic Test

import pytest
def add(x, y): return x + y
def test_add(): assert add(2, 3) == 5

âœ… Parameterized Tests

@pytest.mark.parametrize("a, b, expected", [(1, 2, 3), (-1, 1, 0)])
def test_add(a, b, expected): assert add(a, b) == expected

âœ… Mock External Dependencies (unittest.mock)

from unittest.mock import Mock
api_call = Mock(return_value={"data": "test"})
assert api_call() == {"data": "test"}

âœ… Run Efficient Tests

pytest -n auto --cov=my_module  # Parallel tests + coverage

5ï¸âƒ£ Logging & Debugging

âœ… Use Pythonâ€™s logging Module

import logging
logging.basicConfig(level=logging.INFO)
logging.info("Processing started")

âœ… Replace Print Statements with Logging
	â€¢	logging.debug(), logging.info(), logging.warning(), etc.

6ï¸âƒ£ Documentation & Comments

âœ… Use Docstrings (""" ... """) for Functions & Modules
âœ… Inline Comments for Complex Logic
âœ… Google-Style Docstrings Example

def get_calendar_slots(location_id: str, start_date: datetime, end_date: datetime) -> list:
    """
    Retrieves available time slots from GHL for a given location.

    Args:
        location_id (str): The GHL location identifier.
        start_date (datetime): The start of the time range.
        end_date (datetime): The end of the time range.

    Returns:
        list: Available slot objects.
    """

ðŸš€ Summary

âœ” PEP 8 â†’ Clean formatting, proper spacing, and naming
âœ” Token Efficiency â†’ Use comprehensions, built-ins, caching
âœ” Project Structure â†’ Organized directories, clear separation of concerns
âœ” Testing â†’ pytest + mocks + CI/CD integration
âœ” Logging & Documentation â†’ Structured logs, meaningful docstrings

ðŸ’¡ Code smart, test fast, and optimize well! ðŸš€

---

### **Key Features of This Version:**
âœ… **Compressed for LLMs** â†’ No unnecessary verbosity  
âœ… **Markdown-friendly** â†’ Structured, easy for AI to parse  
âœ… **Best of Both Worlds** â†’ Combines efficiency tips, style guidelines, testing, and project structuring  
âœ… **Actionable & Concise** â†’ Only essential Python practices  

Would you like to add any **specific project-related details** or **custom guidelines** before finalizing? ðŸš€